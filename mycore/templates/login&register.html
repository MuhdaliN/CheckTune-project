{% extends "base.html" %}
{% load static %}

{% block title %} Login | Register • CheckTune {% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/auth.css' %}">

<div class="auth-page">

    <div class="auth-box">

        <!-- NAV TABS -->
        <div class="nav-tabs">
            <span id="navLogin" onclick="setLogin()" class="tab activeTab">Login</span>
            <span id="navSignup" onclick="setSignup()" class="tab">Sign Up</span>
        </div>

        <!-- TITLE -->
        <h2 id="form-title">Login</h2>

        <!-- LOGIN FORM -->
        <form id="login-form" method="POST">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="login">

            <input type="email" name="email" placeholder="Email" required>
            <input type="password" name="password" placeholder="Password" required>

            <label class="remember-box">
                <input type="checkbox" name="remember">
                <span>Remember me</span>
            </label>

            <button type="submit" class="auth-btn">Login</button>
        </form>

        <!-- SIGN UP FORM -->
        <form id="signup-form" method="POST" style="display:none;">
            {% csrf_token %}
            <input type="hidden" name="form_type" value="signup">

            <input type="text" name="name" placeholder="Full Name" required>
            <input type="email" name="email" placeholder="Email" required>
            <input type="password" name="password" placeholder="Password" required>

            <button type="submit" class="auth-btn">Sign Up</button>
        </form>

        <!-- SWITCH TEXT -->
        <div class="switch-text" onclick="event.preventDefault(); toggleForm();">
            Don’t have an account? Sign up
        </div>

        <a href="{% url 'home' %}" class="back-home">⬅ Back to Home</a>
    </div>

</div>

<script>
    const loginForm = document.getElementById("login-form");
    const signupForm = document.getElementById("signup-form");
    const switchText = document.querySelector(".switch-text");
    const title = document.getElementById("form-title");

    const navLogin = document.getElementById("navLogin");
    const navSignup = document.getElementById("navSignup");

    function setLogin() {
        signupForm.style.display = "none";
        loginForm.style.display = "block";
        title.innerText = "Login";
        switchText.innerText = "Don’t have an account? Sign up";

        navLogin.classList.add("activeTab");
        navSignup.classList.remove("activeTab");
    }

    function setSignup() {
        loginForm.style.display = "none";
        signupForm.style.display = "block";
        title.innerText = "Sign Up";
        switchText.innerText = "Already have an account? Login";

        navSignup.classList.add("activeTab");
        navLogin.classList.remove("activeTab");
    }

    function toggleForm() {
        if (loginForm.style.display === "none") setLogin();
        else setSignup();
    }

    setLogin();
</script>

{% endblock %}
